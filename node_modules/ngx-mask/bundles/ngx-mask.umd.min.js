!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/add/operator/take"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/add/operator/take","@angular/forms"],t):t(e["ngx-mask"]={},e.ng.core,e.ng.common,e.Rx.Observable.prototype,e.ng.forms)}(this,function(e,t,r,n,a){"use strict";function o(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var i=new t.InjectionToken("config"),s=new t.InjectionToken("NEW_CONFIG"),c=new t.InjectionToken("INITIAL_CONFIG"),l={clearIfNotMatch:!1,dropSpecialCharacters:!0,specialCharacters:["/","(",")",".",":","-"," ","+"],patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")}}},p=function(){function e(e,r,n,a){this.document=e,this._config=r,this._elementRef=n,this._renderer=a,this.maskExpression="",this.maskSetter$$=new t.EventEmitter,this.onChange=function(e){},this.onTouch=function(){},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this._regExpForRemove=new RegExp(this.maskSpecialCharacters.map(function(e){return"\\"+e}).join("|"),"gi"),this._formElement=this._elementRef.nativeElement}return e.prototype.applyMask=function(e,t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=function(){}),e===undefined||null===e)return"";for(var a=0,o="",i=e.toString().split(""),s=0,c=i[0];s<i.length&&o.length!==t.length;c=i[++s])this._checkSymbolMask(c,t[a])?(o+=c,a++):-1!==this.maskSpecialCharacters.indexOf(t[a])?(o+=t[a],a++,this._shift.add(a),s--):this.maskSpecialCharacters.indexOf(c)>-1&&this.maskAvailablePatterns[t[a]]&&this.maskAvailablePatterns[t[a]].optional&&(a++,s--);o.length+1===t.length&&-1!==this.maskSpecialCharacters.indexOf(t[t.length-1])&&(o+=t[t.length-1]);for(var l=1,p=r+1;this._shift.has(p);)l++,p++;return n(this._shift.has(r)?l:0),o},e.prototype.applyValueChanges=function(e,t){void 0===e&&(e=0),void 0===t&&(t=function(){});var r=this.applyMask(this._formElement.value,this.maskExpression,e,t);this._formElement.value=r,!0===this.dropSpecialCharacters?this.onChange(this._removeMask(r)):this.onChange(r),this._formElement!==this.document.activeElement&&this.clearIfNotMatchFn()},e.prototype.clearIfNotMatchFn=function(){!0===this.clearIfNotMatch&&this.maskExpression.length!==this._formElement.value.length&&(this._formElementProperty=["value",""])},e.prototype.writeValue=function(e){return t=this,r=void 0,a=function(){var t,r;return o(this,function(n){switch(n.label){case 0:return e===undefined?[2]:(r=this.maskExpression)?[3,2]:[4,this.maskSetter$$.take(1).toPromise()];case 1:r=n.sent(),n.label=2;case 2:return t=r,this._formElementProperty=e?["value",this.applyMask(e,t)]:["value",""],[2]}})},new((n=void 0)||(n=Promise))(function(e,o){function i(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a["throw"](e))}catch(t){o(t)}}function c(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(i,s)}c((a=a.apply(t,r||[])).next())});var t,r,n,a},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouch=e},e.prototype.setDisabledState=function(e){this._formElementProperty=e?["disabled","true"]:["disabled","false"]},e.prototype._removeMask=function(e){return e?e.replace(this._regExpForRemove,""):e},e.prototype._checkSymbolMask=function(e,t){return e===t||this.maskAvailablePatterns[t]&&this.maskAvailablePatterns[t].pattern&&this.maskAvailablePatterns[t].pattern.test(e)},Object.defineProperty(e.prototype,"_formElementProperty",{set:function(e){var t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(a)throw a.error}}return i}(e,2),r=t[0],n=t[1];this._renderer.setProperty(this._formElement,r,n)},enumerable:!0,configurable:!0}),e}();p.decorators=[{type:t.Injectable}],p.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]},{type:undefined,decorators:[{type:t.Inject,args:[i]}]},{type:t.ElementRef},{type:t.Renderer2}]};var u=function(){function e(e){this._maskService=e}return Object.defineProperty(e.prototype,"maskExpression",{set:function(e){this._maskValue=e||"",this._maskValue&&(this._maskService.maskExpression=this._maskValue,this._maskService.maskSetter$$.emit(this._maskValue))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialCharacters",{set:function(e){e&&Array.isArray(e)&&(!Array.isArray(e)||e.length)&&(this._maskService.maskSpecialCharacters=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{set:function(e){e&&(this._maskService.maskAvailablePatterns=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropSpecialCharacters",{set:function(e){this._maskService.dropSpecialCharacters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearIfNotMatch",{set:function(e){this._maskService.clearIfNotMatch=e},enumerable:!0,configurable:!0}),e.prototype.onInput=function(e){if(this._maskValue){var t=e.target,r=t.selectionStart,n=0;this._maskService.applyValueChanges(r,function(e){return n=e}),t.selectionStart=t.selectionEnd=r+("deleteContentBackward"===e.inputType?0:n)}},e.prototype.onBlur=function(){this._maskService.clearIfNotMatchFn(),this._maskService.onTouch()},e}();u.decorators=[{type:t.Directive,args:[{selector:"[mask]",providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:p,multi:!0},p]}]}],u.ctorParameters=function(){return[{type:p}]},u.propDecorators={maskExpression:[{type:t.Input,args:["mask"]}],specialCharacters:[{type:t.Input}],patterns:[{type:t.Input}],dropSpecialCharacters:[{type:t.Input}],clearIfNotMatch:[{type:t.Input}],onInput:[{type:t.HostListener,args:["input",["$event"]]}],onBlur:[{type:t.HostListener,args:["blur"]}]};var h=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:s,useValue:t},{provide:c,useValue:l},{provide:i,useFactory:f,deps:[c,s]}]}},e}();function f(e,t){return"function"==typeof t?t():Object.assign({},e,t)}h.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],exports:[u],declarations:[u]}]}],h.ctorParameters=function(){return[]},e.config=i,e.NEW_CONFIG=s,e.INITIAL_CONFIG=c,e.initialConfig=l,e.MaskDirective=u,e.MaskService=p,e.NgxMaskModule=h,e._configFactory=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mask.umd.min.js.map
